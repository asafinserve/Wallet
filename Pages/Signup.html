<!DOCTYPE html>
<head>
   <title>Sign up for Wallet</title>
   <link rel="icon" href="../Assets/main-icon.png">
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style>
   .centre
   {
   text-align: center;
   }
   .center{
   margin: auto;
   width: 30%;
   align-items: center;  
   padding: 10px;
   }   
   .rectangle {
   width: 200px;
   height: 100px;
   border: 1px solid black;
   text-align: center;
   display: inline-block;
   line-height: 50px;
   font-weight: bold;
   font-size: 20px;
   }
   .required::after {
   color: red;
   }
   @import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');
   *{
   list-style: none;
   text-decoration: none;
   margin: 0;
   padding: 0;
   box-sizing: border-box;
   font-family: 'Open Sans', sans-serif;
   }
   body{
   background: #f5f6fa;
   }
   .wrapper .sidebar{
   background: rgb(5, 68, 104);
   position: fixed;
   top: 0;
   left: 0;
   width: 225px;
   height: 100%;
   padding: 20px 0;
   transition: all 0.5s ease;
   }
   .wrapper .sidebar .profile{
   margin-bottom: 30px;
   text-align: center;
   }
   .wrapper .sidebar .profile img{
   display: block;
   width: 100px;
   height: 100px;
   border-radius: 50%;
   margin: 0 auto;
   }
   .wrapper .sidebar .profile h3{
   color: #ffffff;
   margin: 10px 0 5px;
   }
   .wrapper .sidebar .profile p{
   color: rgb(206, 240, 253);
   font-size: 14px;
   }
   .wrapper .sidebar ul li a{
   display: block;
   padding: 13px 30px;
   border-bottom: 1px solid #10558d;
   color: rgb(241, 237, 237);
   font-size: 16px;
   position: relative;
   }
   .wrapper .sidebar ul li a .icon{
   color: #dee4ec;
   width: 30px;
   display: inline-block;
   }
   .wrapper .sidebar ul li a:hover,
   .wrapper .sidebar ul li a.active{
   color: #0c7db1;
   background:white;
   border-right: 2px solid rgb(5, 68, 104);
   }
   .wrapper .sidebar ul li a:hover .icon,
   .wrapper .sidebar ul li a.active .icon{
   color: #0c7db1;
   }
   .wrapper .sidebar ul li a:hover:before,
   .wrapper .sidebar ul li a.active:before{
   display: block;
   }
   .collapsible {
   display: none;
   }
   .collapsible.active {
   display: block;
   }
   .collapsible-button {
   background-color: transparent;
   border: none;
   color: #000;
   font-size: 24px;
   cursor: pointer;
   position: absolute;
   top: 10px;
   left: 10px;
   }
</style>
<body>
   <header>
      <h1 class="centre">Welcome to Wallet</h1>
      <p class="centre">This app helps you manage all your financial transactions with ease</p>
      <p class="centre">Works with:-
      <li class="centre">Credit Cards</li>
      <li class="centre">Debit Cards</li>
      <li class="centre">Banks</li>
      <li class="centre">Cash</li>
      </p>
   </header>
   <button class="collapsible-button">&#9776;</button>
   <div class="collapsible">
      <div class="wrapper">
         <!--Top menu -->
         <div class="sidebar">
            <button class="collapsible-button" id="dis-collapsible-button" style="color:white">&#9776;</button>
            <br>
            <div class="profile">
               <!-- <img src="https://1.bp.blogspot.com/-vhmWFWO2r8U/YLjr2A57toI/AAAAAAAACO4/0GBonlEZPmAiQW4uvkCTm5LvlJVd_-l_wCNcBGAsYHQ/s16000/team-1-2.jpg" alt="profile_picture"> -->
               <h3 id="name_ussser"></h3>
                <p id="user_name"></p>
                <br>
                <button>Logout</button>
            </div>
            <ul>
               <li>
                  <a href="../index.html">
                  <span class="icon"><i class="fas fa-home"></i></span>
                  <span class="item">Home</span>
                  </a>
               </li>
               <li>
                  <a href="CreditCard.html">
                  <span class="icon"><i class="fas fa-credit-card"></i></span>
                  <span class="item">Credit Cards</span>
                  </a>
               </li>
               <li>
                  <a href="Bank.html">
                  <span class="icon"><i class="fas fa-piggy-bank"></i></span>
                  <span class="item">Banks</span>
                  </a>
               </li>
               <li>
                  <a href="Cash.html">
                  <span class="icon"><i class="fas fa-money-bill-wave"></i></span>
                  <span class="item">Cash</span>
                  </a>
               </li>
               <li>
                  <a href="Signup.html" class="active">
                  <span class="icon"><i class="fas fa-child"></i></span>
                  <span class="item">Settings</span>
                  </a>
               </li>
            </ul>
         </div>
      </div>
   </div>
   </div>
   <br>
   <form id="details_form" class="centre">
      <label for="name_user">Enter your name:</label>
      <input id="name_user" type="text">
      <br>
      <br>
      <button onclick="submitName()">Submit</button>
      <br>
      <br>
      <button onclick="del_data()" id="delButton">Delete data and logout</button>
      <br>
      <!-- <label for="password_user">Enter a strong password</label>
         <input id="password_user" type="password"> -->
      <!-- <br> -->
      <br>
      <h2 style="visibility: hidden;" id="add_details_1">Add your details</h2>
      <br>
      <select style="visibility: hidden;" id="type_of_finance" onchange="change_option()">
         <option>Select a financial option</option>
         <option>Credit Cards</option>
         <option>Banks</option>
         <option>Cash</option>
      </select>
   </form>
   <div class="centre" id="to_delete"></div>
   <br><br>
</body>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<script>
    document.getElementById("name_ussser").innerHTML = localStorage.getItem("NameUser")
   const collapsibleButton = document.querySelector('.collapsible-button');
   const menu = document.querySelector('.collapsible');
   
   collapsibleButton.addEventListener('click', () => {
   menu.classList.toggle('active');
   });
   
   
   const discollapisbleButton = document.getElementById("dis-collapsible-button");
   discollapisbleButton.addEventListener('click', () => {
   menu.classList.remove('active')
   });
   function addDarkmodeWidget() {
     const options = {
   bottom: '32px', // default: '32px'
   right: '32px', // default: '32px'
   left: 'unset', // default: 'unset'
   time: '0.5s', // default: '0.3s'
   mixColor: '#fff', // default: '#fff'
   backgroundColor: '#fff',  // default: '#fff'
   buttonColorDark: '#100f2c',  // default: '#100f2c'
   buttonColorLight: '#fff', // default: '#fff'
   saveInCookies: true, // default: true,
   label: 'ðŸŒ“', // default: ''
   autoMatchOsTheme: true // default: true
   }
   
   const darkmode = new Darkmode(options);
   darkmode.showWidget();
   }
   window.addEventListener('load', addDarkmodeWidget);
</script>
<script>
   if(localStorage.getItem("NameUser")==null)
   {
       document.getElementById("delButton").style.visibility="hidden"
   }
   function del_data()
   {
   
   
       if(confirm("Are you sure you wish to delete all the data stored on the device? Doing so, will log you out!"))
       {
           try
           {
               localStorage.removeItem("NameUser")
               localStorage.removeItem("CASH")
               localStorage.removeItem("CREDIT CARDS")
               localStorage.removeItem("setup")
               localStorage.removeItem("particulars_ai")
               window.location.reload()
           }
       catch
       {
   
       }
       }
   }
   
   if(localStorage.getItem("NameUser")!=null)
   {
       document.getElementById("name_user").value = localStorage.getItem("NameUser")
       document.getElementById("add_details_1").style.visibility = "visible";
       document.getElementById("type_of_finance").style.visibility = "visible";
   }
   function submitName()
   {
       event.preventDefault();
       if(name_user.value == "")
       {
           alert("Please enter your name")
       }
       else
       {
           localStorage.setItem("NameUser", name_user.value)
           document.getElementById("add_details_1").style.visibility = "visible";
           document.getElementById("type_of_finance").style.visibility = "visible";
       }
       
   }
   function change_option()
   {
       var x = document.getElementById("type_of_finance").value;
       if (x=="Select a financial option")
       {
           alert("Select any one of the option to begin with")
           document.getElementById("to_delete").replaceChildren()
   
       }
       else if (x=="Credit Cards")
       {
           try
           {
               document.getElementById("to_delete").replaceChildren()
           }
           catch
           {
   
           }
           var spacer = document.createElement("br")
           document.getElementById("details_form").appendChild(spacer)
           var creditcard_entry = document.createElement("input")
           creditcard_entry.id="creditcard_entry"
           creditcard_entry.placeholder="Enter your credit card bank"
           creditcard_entry.width="150px"
           creditcard_entry.type="text"
           var nickname_entry = document.createElement("input")
           nickname_entry.id="nickname_entry"
           nickname_entry.placeholder="Enter a nickname for your card"
           nickname_entry.width="150px"
           nickname_entry.type="text"
           var spacer = document.createElement("br")
           var due_date = document.createElement("select")
           due_date.id="due_date_checker"
           var options = ["On which date of the month is your credit card statement generated?", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"];
           for (var i = 0; i < options.length; i++) {
               var option = document.createElement("option");
               option.value = options[i];
               option.text = options[i];
               due_date.appendChild(option);
           }
           document.getElementById("to_delete").innerHTML+="<br>"
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(creditcard_entry)
           document.getElementById("to_delete").appendChild(nickname_entry)
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(due_date)
           var submit_btn = document.createElement("button")
           submit_btn.id="submit_btn"
           submit_btn.innerHTML="Add details"
           submit_btn.addEventListener("click", function(){
               if(nickname_entry.value == "" || creditcard_entry.value=="" || document.getElementById("due_date_checker").options[document.getElementById("due_date_checker").selectedIndex].text=="On which date of the month is your credit card statement generated? If it is on 31st of any month, please select 30")
               {
                   alert("Please fill out all the fields")
               }
               else
               {
                   if (localStorage.getItem("CREDIT CARDS")==null)
               {
                   objeee = new Object()
                   objeee.NO_OF_CARDS = 1
                   strrr = `${creditcard_entry.value} (${nickname_entry.value})`
                   objeee.TRANSACTIONS = []
                   oobb = new Object()
                   todayDate = new Date()
                   tempDate = new Date()
                   tempDate.setDate(document.getElementById("due_date_checker").options[document.getElementById("due_date_checker").selectedIndex].text)
                   tempDate.setHours(0,0,0)
                   if (todayDate>=tempDate)
                   {
                       tempDate.setMonth(tempDate.getMonth()+1)
                       oobb.DueDate = tempDate.toString()
                   }            
                   else
                   {
                       oobb.DueDate = tempDate.toString()
                   }   
                   oobb.BalanceOutstanding = 0
                   objeee[strrr] = oobb
                   towrite = JSON.stringify(objeee)
                   localStorage.setItem("CREDIT CARDS", towrite)
                   localStorage.setItem("setup", "DONE")
                    if (localStorage.getItem("NameUser")==null) 
                    {
                        alert("Please submit your name and username also")
                    }
                    else
                    {
                        if(confirm("Added successfully. Add another financial option?"))
                    {
                        document.getElementById("type_of_finance").value = "Select a financial option"
                        document.getElementById("to_delete").replaceChildren()
                    }
                    else
                    {
                        window.location = "../index.html"
                    }
               }
                   
               }
               else
               {
                   data = JSON.parse(localStorage.getItem("CREDIT CARDS"))
                   if (`${creditcard_entry.value} (${nickname_entry.value})` in data)
                   {
                    alert("You already have a credit card with the same nickname. Try another nickname")
                   }
                   else
                   {
                       data["NO_OF_CARDS"]+=1
                       oobb = new Object()
                       todayDate = new Date()
                       tempDate = new Date()   
                       tempDate.setDate(document.getElementById("due_date_checker").options[document.getElementById("due_date_checker").selectedIndex].text)
                       tempDate.setHours(0,0,0)
                       if (todayDate>=tempDate)
                       {
                           tempDate.setMonth(tempDate.getMonth()+1)
                           oobb.DueDate = tempDate.toString()
                       }             
                       else
                       {
                           oobb.DueDate = tempDate.toString()
                       }         
                       oobb.BalanceOutstanding = 0
                       data[`${creditcard_entry.value} (${nickname_entry.value})`] = oobb
                       towrite = JSON.stringify(data)
                       localStorage.setItem("CREDIT CARDS", towrite)
                       if (localStorage.getItem("NameUser")==null) 
                    {
                        alert("Please submit your name and username also")
                    }
                    else
                    {
                        if(confirm("Added successfully. Add another financial option?"))
                    {
                        document.getElementById("type_of_finance").value = "Select a financial option"
                        document.getElementById("to_delete").replaceChildren()
                    }
                    else
                    {
                        window.location = "../index.html"
                    }
                       }
   
   
               
               
               
                    }}}
               
           })
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(submit_btn)
       }
       else if (x=="Cash")
       {
           try
           {
               document.getElementById("to_delete").replaceChildren()
           }
           catch
           {
   
           }
           var spacer = document.createElement("br")
           var creditcard_entry = document.createElement("input")
           creditcard_entry.id="creditcard_entry"
           creditcard_entry.placeholder="Enter the amount of cash with you now"
           creditcard_entry.width="150px"
           creditcard_entry.type="text"
           var spacer = document.createElement("br")
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(creditcard_entry)
           var submit_btn = document.createElement("button")
           submit_btn.id="submit_btn"
           submit_btn.innerHTML="Add details"
           submit_btn.addEventListener("click", function(){
               if(creditcard_entry.value=="")
               {
                   alert("Please fill out all the fields")
               }
               else
               {
                   if (localStorage.getItem("CASH")!=null)
                    {
                        if (confirm("Warning\nThis will overwrite your current cash balance and delete all your previous transactions recorded in Wallet. Continue?") == true)
                        {
                            objeee = new Object()
                            objeee.CASH_BALANCE = creditcard_entry.value
                            objeee.TRANSACTIONS = []
                            towrite = JSON.stringify(objeee)
                            localStorage.setItem("CASH", towrite)
                            if(confirm("Added successfully. Add another financial option?"))
                            {
                                document.getElementById("type_of_finance").value = "Select a financial option"
                                document.getElementById("to_delete").replaceChildren()
                            }
                            else
                            {
                                window.location = "../index.html"
                            }
                        }
                    }
                    else
                    {
                        objeee = new Object()
                        objeee.CASH_BALANCE = creditcard_entry.value
                        objeee.TRANSACTIONS = []
                        towrite = JSON.stringify(objeee)
                        localStorage.setItem("CASH", towrite)
                        localStorage.setItem("setup", "DONE")
                    if (localStorage.getItem("NameUser")==null) 
                    {
                        alert("Please submit your name and username also")
                    }
                            else
                            {
                                if(confirm("Added successfully. Add another financial option?"))
                            {
                                document.getElementById("type_of_finance").value = "Select a financial option"
                                document.getElementById("to_delete").replaceChildren()
                            }
                            else
                            {
                                window.location = "../index.html"
                            }
                            }
                    }  
               
               }
               
           })
   
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(submit_btn)
       }
       else if (x=="Banks")
       {
           try
           {
               document.getElementById("to_delete").replaceChildren()
           }
           catch
           {
   
           }
           var spacer = document.createElement("br")
           document.getElementById("details_form").appendChild(spacer)
           var creditcard_entry = document.createElement("input")
           creditcard_entry.id="creditcard_entry"
           creditcard_entry.placeholder="Enter your bank name"
           creditcard_entry.width="150px"
           creditcard_entry.type="text"
           var nickname_entry = document.createElement("input")
           nickname_entry.id="nickname_entry"
           nickname_entry.placeholder="Enter a nickname for your bank account"
           nickname_entry.width="150px"
           nickname_entry.type="text"
           
           
           var spacer = document.createElement("br")
           var balance_entry = document.createElement("input")
           balance_entry.id="balance_entry"
           balance_entry.placeholder="Enter your bank balance"
           balance_entry.width="150px"
           balance_entry.type="number"
           var spacer = document.createElement("br")
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(creditcard_entry)
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(nickname_entry)
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(balance_entry)
           var details = document.createElement("p")
           details.innerHTML="This will add a bank account. "
           
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(details)
           var submit_btn = document.createElement("button")
           submit_btn.id="submit_btn"
           submit_btn.innerHTML="Add details"
           submit_btn.addEventListener("click", function(){
               if(nickname_entry.value == "" || creditcard_entry.value=="" || balance_entry.value=="")
               {
                   alert("Please fill out all the fields")
               }
               else
               {
                   if (localStorage.getItem("BANKS")==null)
                   {
                       objeee = new Object()
                       objeee.NO_OF_BANKACCOUNTS = 1
                       strrr = `${creditcard_entry.value} (${nickname_entry.value})`
                       objeee[strrr] = parseFloat(balance_entry.value)
                       objeee.TRANSACTIONS=[]
                       towrite = JSON.stringify(objeee)
                       localStorage.setItem("BANKS", towrite)
                       
                       localStorage.setItem("setup", "DONE")
                       if (localStorage.getItem("NameUser")==null) 
               {
                   alert("Please submit your name and username also")
               }
                       else
                       {
                           if(confirm("Added successfully. Add another financial option?"))
                       {
                           document.getElementById("type_of_finance").value = "Select a financial option"
                           document.getElementById("to_delete").replaceChildren()
                       }
                       else
                       {
                           window.location = "../index.html"
                       }
                       }
               
                   }
               else
               {
                   data = JSON.parse(localStorage.getItem("BANKS"))
                   if(`${creditcard_entry.value} (${nickname_entry.value})` in data)
                       {
                           alert("You have a bank account with the same nickname. Enter another nickname")
   
                       }
                       else
                       {
                           data["NO_OF_BANKACCOUNTS"]+=1
                           data[`${creditcard_entry.value} (${nickname_entry.value})`] = parseFloat(balance_entry.value)
                           towrite = JSON.stringify(data)
                           localStorage.setItem("BANKS", towrite)
                           
                           localStorage.setItem("setup", "DONE")
                           if (localStorage.getItem("NameUser")==null) 
               {
                   alert("Please submit your name and username also")
               }
                           else
                           {
                               if(confirm("Added successfully. Add another financial option?"))
                           {
                               document.getElementById("type_of_finance").value = "Select a financial option"
                               document.getElementById("to_delete").replaceChildren()
                           }
                           else
                           {
                               window.location = "../index.html"
                           }
                           }
               
                       }
               }
               
               
               }
               
           })
           document.getElementById("to_delete").appendChild(spacer)
           document.getElementById("to_delete").appendChild(submit_btn)
           
       }
   }
</script>
</html>